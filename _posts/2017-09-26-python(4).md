---
layout: post
title:  Python 3 错误、调试和测试
date:   2017-09-21 19:58:00 +0800
categories: Python
tag: Python
---

* content
{:toc}

### 1.错误处理

Python通过`try...except...finally...`捕获并处理错误。并且可以有多个`except`来捕获不同类型的错误；可以在except语句块后面加一个`else`，当没有错误发生时，会自动执行else语句：

```
try:
    print('try...')
    r = 10 / int('a')
    print('result:', r)
except ValueError as e:
    print('ValueError:', e)
except ZeroDivisionError as e:
    print('ZeroDivisionError:', e)
else:
	print('no error')
finally:
    print('finally...')
print('END')
```

Python的错误其实也是class，所有的错误类型都继承自`BaseException`，所以在使用`except`时需要注意的是，它不但捕获该类型的错误，同时还把其子类也捕获。

[常见的错误类型和继承关系](https://docs.python.org/3/library/exceptions.html#exception-hierarchy)

#### 自定义错误

根据需要，可以定义一个错误的class，选择好继承关系，然后，用`raise`语句抛出一个错误的实例：

```
class FooError(ValueError):
    pass

def foo(s):
    n = int(s)
    if n==0:
        raise FooError('invalid value: %s' % s)
    return 10 / n

foo('0')
```

`raise`语句如果不带参数，就会把当前错误原样抛出。此外，在`except`中`raise`一个Error，还可以把一种类型的错误转化成另一种类型：

```
try:
    10 / 0
except ZeroDivisionError:
    raise ValueError('input error!')
```

### 2.调试

#### 2.1 断言

#### 2.2 logging