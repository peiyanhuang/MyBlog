---
layout: post
title:  Vue学习
date:   2017-02-16 20:58:00 +0800
categories: JS
tag: Vue
---

* content
{:toc}

## 指令 v-

### v-bind 绑定 class、style

缩写：`v-bind:class` 可以缩写为 `:class`

```
<div class="static" v-bind:class="{ active: isActive, 'text-danger': hasError }"></div>
```

上面的语法表示 class `active` 的更新将取决于数据属性 `isActive` 是否为真值 。

```
<div v-bind:class="[activeClass, errorClass]">
```

把一个数组传给 `v-bind:class` 则 `class` 为 `activeClass, errorClass`所代表的值。

`v-bind:style` 的 CSS 属性名可以用驼峰式（camelCase）或短横分隔命名（kebab-case）：

```
<div v-bind:style="{ color: activeColor, fontSize: fontSize + 'px' }"></div>
<div v-bind:style="[baseStyles, overridingStyles]">
```

上面对象语法 `color` 的属性值为 `activeColor` 的值，数组语法可以将多个样式对象应用到一个元素上

### v-once 和 v-html

`v-once` 指令，表示执行一次性地插值，当数据改变时，插值处的内容不会更新。这会影响到该节点上所有的数据绑定。

```
<span v-once>This will never change: {{ msg }}</span>
```

`v-html` 指令表示被插入的内容都会被当做 HTML —— 数据绑定会被忽略。

	<div v-html="rawHtml"></div>

### v-if 、 v-else 和 v-else-if

```
<div v-if="type === 'A'">
  A
</div>
<div v-else-if="type === 'B'">
  B
</div>
<div v-else-if="type === 'C'">
  C
</div>
<div v-else>
  Not A/B/C
</div>
```

根据表达式的值的真假条件渲染元素。

想切换多个元素时，我们可以把一个 `<template>` 元素当做包装元素，并在上面使用 `v-if`，最终的渲染结果不会包含它。

```
<template v-if="ok">
  	<h1>Title</h1>
  	<p>Paragraph 1</p>
  	<p>Paragraph 2</p>
</template>
```

### v-show

```
<h1 v-show="ok">Hello!</h1>
```

`v-show` 指令会根据条件展示元素。 

与 `v-if` 不同的是有 `v-show` 的元素会始终渲染并保持在 DOM 中。`v-show` 只是简单的切换元素的 CSS 属性 `display` 。

### v-for

`v-for` 指令根据一组数组或对象的选项列表进行渲染。

`items` 是数组时：`item` 表示数组当前的元素，`index` 表示当前项的索引

```
<div v-for="item in items">{{item}}</div>
<div v-for="(item, index) in items"></div>
```

`items` 是对象时：`value` 表示当前对象的键值，`key` 表示当前项的键名，`index` 表示当前项的索引

```
<div v-for="value in object">{{ value }}</div>
<div v-for="(val, key) in object"></div>
<div v-for="(val, key, index) in object"></div>
```

可以用 `of` 替代 `in` 作为分隔符

```
<div v-for="item of items"></div>
```

v-for 也可以取整数

```
<span v-for="n in 10">{{ n }}</span>
```

### v-on 

缩写：`v-on:click` 可以缩写为 `@click`

```
<button v-on:click="greet">Greet</button>
<button v-on:click="handle('ok', $event)"></button>
```

`v-on` 绑定事件监听器，要在内联语句处理器中访问原生 DOM 事件。可以用特殊变量 $event 把它传入方法

用在普通元素上时，只能监听 原生 DOM 事件。用在自定义元素组件上时，也可以监听子组件触发的自定义事件。

Vue.js 为 `v-on` 提供了 事件修饰符：

```
<!-- 阻止单击事件冒泡 -->
<a v-on:click.stop="doThis"></a>
<!-- 修饰符可以串联  -->
<a v-on:click.stop.prevent="doThat"></a>
```

- .stop - 调用 event.stopPropagation()。
- .prevent - 调用 event.preventDefault()。
- .capture - 添加事件侦听器时使用事件捕获模式。
- .self - 只当事件是从侦听器绑定的元素本身触发时才触发回调。
- .{keyCode | keyAlias} - 只当事件是从侦听器绑定的元素本身触发时才触发回调。
- .native - 监听组件根元素的原生事件。
- .once - 事件将被触发最多一次

Vue.js 为 `v-on` 提供的 按键修饰符：

```
<!-- 只有在 keyCode 是 13 时调用 vm.submit() -->
<input v-on:keyup.13="submit">
<!-- 同上 -->
<input v-on:keyup.enter="submit">
```

全部的按键别名：
- .enter
- .tab
- .delete (捕获 “删除” 和 “退格” 键)
- .esc
- .space
- .up
- .down
- .left
- .right
- .ctrl
- .alt
- .shift
- .meta (Mac的Command键,Windows键盘是Windows键)

可以通过全局 config.keyCodes 对象自定义按键修饰符别名：

```
Vue.config.keyCodes = {
  	v: 86,
  	f1: 112,
  	mediaPlayPause: 179,
  	up: [38, 87]
}
```

## key , ref , slot

### key

可以用来控制元素的重用

```
<template v-if="loginType === 'username'">
  	<label>Username</label>
  	<input placeholder="Enter your username">
</template>
<template v-else>
  	<label>Email</label>
  	<input placeholder="Enter your email address">
</template>
```

切换 `loginType` 不会删除用户已经输入的内容，两个模版由于使用了相同的元素，`<input>` 会被复用，仅仅是替换了他们的 `placeholder`。

Vue 提供一种方式让你可以自己决定是否要复用元素。你要做的是添加一个属性 `key` ，`key` 必须带有唯一的值。

```
<template v-if="loginType === 'username'">
  	<label>Username</label>
  	<input placeholder="Enter your username" key="username-input">
</template>
<template v-else>
  	<label>Email</label>
  	<input placeholder="Enter your email address" key="email-input">
</template>
```